<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Markerless Mobile Web AR Example</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/2.0.8/aframe/build/aframe-ar.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs="sourceType: webcam; geolocUser: true; debugUIEnabled: false;">
        <!-- Create an A-Frame scene for markerless augmented reality with geolocation tracking -->
        <a-entity camera gps-camera rotation-reader></a-entity>

        <!-- 3D model to display -->
        <a-entity
            gltf-model="url(/gaming_laptop.glb)"
            scale="0.3 0.3 0.3"
            position="-2 0 -15"
            rotation="0 260 0" 
        ></a-entity>

        <a-entity
        id="moving-entity"
            gltf-model="url(/message_emoji.glb)"
            scale="0.3 0.3 0.3"
            position="-20 20 -250"
            rotation="0 0 0" 
        ></a-entity>

        <a-entity
            gltf-model="url(/gaming_laptop.glb)"
            scale="0.3 0.3 0.3"
            position="2 0 -15"
            rotation="0 260 0" 
        ></a-entity>
    </a-scene>

    <script>
        const movingEntity = document.querySelector("#moving-entity"); <!-- Get the element with the ID "moving-entity" -->
		const initialX = -20; // Starting position (left)
        const maxX = 15;     // Maximum right position
        const minX = -20;    // Minimum left position
        const speed = 0.50;  // Speed of movement

        let direction = 1;   // 1 for right, -1 for left
        let currentPosition = initialX;

        // Function to animate horizontal movement
        function moveEntity() {
            currentPosition += speed * direction;
            movingEntity.setAttribute("position", `${currentPosition} 10 -250`); // Update the position of the entity -->

            if (currentPosition >= maxX || currentPosition <= minX) {
                // Reverse direction when reaching edges
                direction *= -1;
            }

            requestAnimationFrame(moveEntity); // Request the next animation frame and call the moveEntity function -->
        }

        // Call the moveEntity function in the animation loop
        moveEntity();
    </script>
</body>
</html>
